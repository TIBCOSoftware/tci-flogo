{
    "imports": [
        "github.com/project-flogo/flow",
        "github.com/tibco/flogo-general/src/app/General/activity/log",
        "github.com/project-flogo/messaging-contrib/pulsar/trigger/subscriber",
        "git.tibco.com/git/product/ipaas/wi-contrib.git/function/utility",
        "github.com/project-flogo/contrib/function/string",
        "github.com/project-flogo/messaging-contrib/pulsar/connection"
    ],
    "name": "New_Flogo_App_36",
    "description": "  ",
    "version": "1.0.0",
    "type": "flogo:app",
    "appModel": "1.1.1",
    "tags": [],
    "triggers": [
        {
            "ref": "#subscriber",
            "name": "pulsar-subscriber",
            "description": "A pulsar trigger which reads messages from apache pulsar queue",
            "settings": {
                "connection": "conn://567e5c20-70e8-11ef-8ce1-d3711afff934"
            },
            "id": "ApachePulsarConsumer",
            "handlers": [
                {
                    "description": "To consume a messages from a topic",
                    "settings": {
                        "topic": "pulsar",
                        "topicsPattern": "",
                        "subscriptionName": "automationSubscription",
                        "subscriptionType": "Shared",
                        "processingMode": "Sync",
                        "initialPosition": "Latest",
                        "dlqTopic": "",
                        "dlqMaxDeliveries": 3,
                        "nackRedeliveryDelay": 60,
                        "enableBatchIndexAcknowledgment": false,
                        "maxPendingChunkedMessage": 2,
                        "expireTimeOfIncompleteChunk": 5,
                        "autoAckIncompleteChunk": false,
                        "format": "JSON"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:Consumer"
                        },
                        "input": {
                            "payload": {
                                "mapping": {
                                    "MsgText": "=$.payload.MsgText",
                                    "number": "=$.payload.number"
                                }
                            },
                            "properties": {
                                "mapping": {
                                    "msgType": "=$.properties.msgType"
                                }
                            },
                            "topic": "=$.topic"
                        }
                    },
                    "schemas": {
                        "output": {
                            "payload": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"MsgText\":{\"type\":\"string\"},\"number\":{\"type\":\"number\"}}}",
                                "fe_metadata": "{\"MsgText\":\"\",\"number\":1}",
                                "feSchemaMap": {}
                            },
                            "properties": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"msgType\":{\"type\":\"string\"}},\"required\":[]}",
                                "fe_metadata": "[{\"parameterName\":\"msgType\",\"type\":\"string\"}]"
                            },
                            "jsonSchema": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"MsgText\":{\"type\":\"string\"},\"number\":{\"type\":\"number\"}}}",
                                "fe_metadata": "{\"MsgText\":\"\",\"number\":1}",
                                "feSchemaMap": {}
                            }
                        }
                    },
                    "name": "Consumer"
                }
            ]
        }
    ],
    "resources": [
        {
            "id": "flow:Consumer",
            "data": {
                "name": "Consumer",
                "description": "To consume a messages from a topic",
                "links": [],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"Payload : \", utility.renderJSON($flow.payload, false), \" Property : \",$flow.properties.msgType,\" Topic : \",$flow.topic)"
                            }
                        }
                    }
                ],
                "fe_metadata": "eyJMb2dNZXNzYWdlIjp7IngiOjUwLCJ5Ijo1MH19",
                "metadata": {
                    "input": [
                        {
                            "name": "payload",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"MsgText\":{\"type\":\"string\"},\"number\":{\"type\":\"number\"}}"
                            }
                        },
                        {
                            "name": "properties",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"msgType\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "topic",
                            "type": "string"
                        },
                        {
                            "name": "msgid",
                            "type": "string"
                        },
                        {
                            "name": "redeliveryCount",
                            "type": "integer"
                        }
                    ],
                    "output": [],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"ApachePulsarConsumer\",\"properties\":{\"payload\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"MsgText\":{\"type\":\"string\"},\"number\":{\"type\":\"number\"}}},\"properties\":{\"type\":\"object\",\"properties\":{\"msgType\":{\"type\":\"string\"}},\"required\":[]},\"topic\":{\"type\":\"string\",\"required\":false},\"msgid\":{\"type\":\"string\",\"required\":false},\"redeliveryCount\":{\"type\":\"integer\",\"required\":false}}}"
                    }
                }
            }
        }
    ],
    "properties": [
        {
            "name": "pulsar.pulsarConnection.Broker_URL",
            "type": "string",
            "value": "pulsar+ssl://ec2-18-144-30-182.us-west-1.compute.amazonaws.com:6659"
        },
        {
            "name": "pulsar.pulsarConnection.Allow_Insecure_Connection",
            "type": "boolean",
            "value": false
        },
        {
            "name": "pulsar.pulsarConnection.Broker_CA",
            "type": "string",
            "value": {
                "filename": "rootCA.crt.pem",
                "content": "data:application/x-x509-ca-cert;base64,LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVsVENDQTMyZ0F3SUJBZ0lVSU5oak5nWDNKRlZWSTExZ1V4NVIyOGVXdEkwd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2dka3hDekFKQmdOVkJBWVRBa2xPTVFzd0NRWURWUVFJREFKTlNERU5NQXNHQTFVRUJ3d0VVSFZ1WlRFTwpNQXdHQTFVRUNnd0ZWRWxDUTA4eEV6QVJCZ05WQkFzTUNrTnZibTVsWTNSdmNuTXhPakE0QmdOVkJBTU1NV1ZqCk1pMHhPQzB4TkRRdE16QXRNVGd5TG5WekxYZGxjM1F0TVM1amIyMXdkWFJsTG1GdFlYcHZibUYzY3k1amIyMHgKVFRCTEJna3Foa2lHOXcwQkNRRVdQbUZrYldsdVFISnZiM1JqWVM1bFl6SXRNVGd0TVRRMExUTXdMVEU0TWk1MQpjeTEzWlhOMExURXVZMjl0Y0hWMFpTNWhiV0Y2YjI1aGQzTXVZMjl0TUI0WERUSXlNRGN3TVRFM01qWTFPRm9YCkRUSTFNRFF5TURFM01qWTFPRm93Z2RreEN6QUpCZ05WQkFZVEFrbE9NUXN3Q1FZRFZRUUlEQUpOU0RFTk1Bc0cKQTFVRUJ3d0VVSFZ1WlRFT01Bd0dBMVVFQ2d3RlZFbENRMDh4RXpBUkJnTlZCQXNNQ2tOdmJtNWxZM1J2Y25NeApPakE0QmdOVkJBTU1NV1ZqTWkweE9DMHhORFF0TXpBdE1UZ3lMblZ6TFhkbGMzUXRNUzVqYjIxd2RYUmxMbUZ0CllYcHZibUYzY3k1amIyMHhUVEJMQmdrcWhraUc5dzBCQ1FFV1BtRmtiV2x1UUhKdmIzUmpZUzVsWXpJdE1UZ3QKTVRRMExUTXdMVEU0TWk1MWN5MTNaWE4wTFRFdVkyOXRjSFYwWlM1aGJXRjZiMjVoZDNNdVkyOXRNSUlCSWpBTgpCZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFycFMySG1CTndGOUJvQVR4M0U3bVpUNk5zdmhaCnBQdmtyYVo1VE1PajdUVHdvTU51TWpwTWNUZzRRc3BnckhGNHduK3lDL1VmTVdDamxWVnN4dTE3K3JXT0VmKy8KYWYySmdUUTBrdi9oWng5SWprTm1IL2YxSjdrZUorbXBEVm5nNjV5K0ZVQ2gyRjBXNG1mU2gzYXJJTGdMQ2FzUwpFK1dpSTl1dG9leG9sQzNuYWNHU1JFWFZpYmpodFQrR3dBb3dOc2lQVkN1TjBRdjczeWhDVHE0K1g1azlmTnREClp6UU5lNXB4eW1yQ056T0JxcldLZVN3aTNxUjNhd2JIRCtGaG1YaVZEN29rMnRwOW1ybmwxZkRDbEcyODhDQkMKcHZrdmowSkdyNGJ3TC9iSjNWRHpuME5UbnZWZ3hNWFpHWXB1cWVUTFlOU2UxSHZSL00rSkhCMFdEUUlEQVFBQgpvMU13VVRBZEJnTlZIUTRFRmdRVUJhY0ZrL1crbjc2by9BTjllNHFhekNxaGo5b3dId1lEVlIwakJCZ3dGb0FVCkJhY0ZrL1crbjc2by9BTjllNHFhekNxaGo5b3dEd1lEVlIwVEFRSC9CQVV3QXdFQi96QU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBUUVBTU80WmRnMENoZ3ZuMTRGeDk5YWx2NkthMTdhZ0hrLzhQenRxQ1RqNGZBa0xsMjdoVUpwSwpDcmJyQnRpMEh5M0lNV2NFL1dCL2N2RlpiY1NNY2I3Yk5qYUFrY1c3YkpDUGgvS1dWa2ptRytYYmxhdWUwa01DCmFQYytmYUFVM0NQWG5XVUlEdmUvRHBXSnIvb054NWN3WFRWK1NiR1FKZE1RYldiTFBBQ1VTaFREMkRPREJOMWMKb01XcFFwbjhTUE1UT3hXTzFlZEJON1hoQjBZQnB6U2s1SGxsakhXU21mM0JnNDk4VGZpdndQdHBFMUVwL0NtTgp0dmhHbE5lY0hVZmRZRnd2WWptVURGNHNHdG95bGIwMTBiWDNXbk5VNW1jVUpWZnJCZkFzLzA3b0xXK25USWY1CnJzSEw0VWUxOEdYRmxncmgyWGZXa1VTVUhMVHdQellPMVE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
            }
        },
        {
            "name": "pulsar.pulsarConnection.Private_Key",
            "type": "string",
            "value": {
                "filename": "credentials.json",
                "content": "data:application/json;base64,ewogICJ0eXBlIjogImNsaWVudF9jcmVkZW50aWFscyIsCiAgImNsaWVudF9pZCI6ICJSSzFZcU1HMzFZS0pSQ05kdkdxaUhVcHIzSEhDOE5LTSIsCiAgImNsaWVudF9zZWNyZXQiOiAidmJYd0RiVmNmVlZRQXVSanI3X3gxT3ZoQUVYUFFQQ1hwaXk4NlNxeTFDQlpyakVfaEl5ZkV2MVFUWVZVdTk5dSIsCiAgImNsaWVudF9lbWFpbCI6ICJ0ZXN0d2F2ZXFhQGdtYWlsLmNvbSIsCiAgImlzc3Vlcl91cmwiOiAiaHR0cHM6Ly9kZXYtd3Yxa2ZncDEudXMuYXV0aDAuY29tIgp9Cg=="
            }
        },
        {
            "name": "pulsar.pulsarConnection.Issuer_URL",
            "type": "string",
            "value": " https://dev-wv1kfgp1.us.auth0.com"
        },
        {
            "name": "pulsar.pulsarConnection.Audience",
            "type": "string",
            "value": "https://dev-wv1kfgp1.us.auth0.com/api/v2/"
        },
        {
            "name": "pulsar.pulsarConnection.Scope",
            "type": "string",
            "value": ""
        },
        {
            "name": "pulsar.pulsarConnection.Connection_Timeout",
            "type": "float64",
            "value": 30
        },
        {
            "name": "pulsar.pulsarConnection.Operation_Timeout",
            "type": "float64",
            "value": 30
        }
    ],
    "connections": {
        "567e5c20-70e8-11ef-8ce1-d3711afff934": {
            "id": "567e5c20-70e8-11ef-8ce1-d3711afff934",
            "name": "pulsarConnection",
            "ref": "#connection",
            "isGlobal": false,
            "settings": {
                "name": "pulsarConnection",
                "description": "",
                "url": "=$property[\"pulsar.pulsarConnection.Broker_URL\"]",
                "auth": "OAuth2",
                "allowInsecure": "=$property[\"pulsar.pulsarConnection.Allow_Insecure_Connection\"]",
                "caCert": "=$property[\"pulsar.pulsarConnection.Broker_CA\"]",
                "certFile": "",
                "keyFile": "",
                "athenzAuth": "",
                "jwt": "SECRET:TukBPuLrbFQfKBksO2lYgQ==",
                "privateKey": "=$property[\"pulsar.pulsarConnection.Private_Key\"]",
                "issuerUrl": "=$property[\"pulsar.pulsarConnection.Issuer_URL\"]",
                "audience": "=$property[\"pulsar.pulsarConnection.Audience\"]",
                "scope": "=$property[\"pulsar.pulsarConnection.Scope\"]",
                "connTimeout": "=$property[\"pulsar.pulsarConnection.Connection_Timeout\"]",
                "opTimeout": "=$property[\"pulsar.pulsarConnection.Operation_Timeout\"]"
            }
        }
    },
    "metadata": {
        "endpoints": [],
        "flogoVersion": "2.25.1"
    },
    "contrib": "W3sicmVmIjoiZ2l0aHViLmNvbS9wcm9qZWN0LWZsb2dvL21lc3NhZ2luZy1jb250cmliL3B1bHNhciIsInZlcnNpb24iOiIxLjMuMyIsInRhZyI6IjEuMy4zLWIwOSIsIm5hbWUiOiJBcGFjaGUgUHVsc2FyIiwiaWQiOiJwdWxzYXIiLCJzM2xvY2F0aW9uIjoiVGliY28vcHVsc2FyIiwiaXNVc2VyRXh0ZW5zaW9uIjpmYWxzZX0seyJyZWYiOiJnaXRodWIuY29tL3RpYmNvL2Zsb2dvLWdlbmVyYWwvc3JjL2FwcC9HZW5lcmFsIiwidmVyc2lvbiI6IjEuNi4yIiwidGFnIjoiMS42LjItYjAyIiwibmFtZSI6IkdlbmVyYWwiLCJpZCI6IkdlbmVyYWwiLCJzM2xvY2F0aW9uIjoiVGliY28vR2VuZXJhbCIsImlzVXNlckV4dGVuc2lvbiI6ZmFsc2V9XQ=="
}