<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.83.1" />
    <meta name="description" content="TIBCO Cloud Integration - Flogo">
<meta name="author" content="rishikeshpalve">

    <link rel="shortcut icon" href="https://www.tibco.com/sites/tibco/files/favicon_0.ico" type="image/vnd.microsoft.icon">
    <title>Activity Model and Runtime :: TIBCO Cloud Integration - Flogo</title>
    
    
    <link href="/tci-flogo/css/nucleus.css?1623302974" rel="stylesheet">
    <link href="/tci-flogo/css/font-awesome.min.css?1623302974" rel="stylesheet">
    <link href="/tci-flogo/css/hybrid.css?1623302974" rel="stylesheet">
    <link href="/tci-flogo/css/featherlight.min.css?1623302974" rel="stylesheet">
    <link href="/tci-flogo/css/perfect-scrollbar.min.css?1623302974" rel="stylesheet">
    <link href="/tci-flogo/css/auto-complete.css?1623302974" rel="stylesheet">
    <link href="/tci-flogo/css/theme.css?1623302974" rel="stylesheet">
    <link href="/tci-flogo/css/hugo-theme.css?1623302974" rel="stylesheet">
    
      <link href="/tci-flogo/css/theme-blue.css?1623302974" rel="stylesheet">
    

    <script src="/tci-flogo/js/jquery-2.x.min.js?1623302974"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/activity-model-runtime/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <svg id="icon-logo-tibco" viewBox="0 0 83 32" width="100%" height="100%">
    <title>logo-tibco</title>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M9.361 6.199v16.837h-2.594v-16.837h-6.766v-2.471h16.126v2.471h-6.766z"></path>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M19.215 23.036v-19.308h2.595v19.308h-2.595z"></path>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M40.122 17.569c0 3.274-2.194 5.467-7.166 5.467h-6.581v-19.308h6.395c4.666 0 6.734 2.1 6.734 5.128 0 1.978-1.143 3.43-3.306 4.233 2.565 0.648 3.923 2.317 3.923 4.48zM32.986 6.138h-3.985v6.055c0.030 0 3.583 0 3.583 0 2.78 0 4.294-1.235 4.294-3.12 0-1.854-1.359-2.935-3.893-2.935zM32.801 14.571h-3.8v6.055h4.202c2.873 0 4.294-1.020 4.294-3.027 0.001-2.225-1.977-3.028-4.696-3.028z"></path>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M57.242 7.25c-1.699-1.112-3.274-1.637-5.282-1.637-4.202 0-7.014 2.904-7.014 7.693s2.842 7.847 7.075 7.847c2.070 0 4.109-0.834 5.467-1.884l0.433 2.626c-1.575 0.989-3.8 1.606-5.962 1.606-5.654 0-9.67-3.923-9.67-10.071s4.048-10.166 9.671-10.166c2.193 0 4.541 0.618 6.117 1.607l-0.835 2.378z"></path>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M73.985 4.626c-0.286-0.177-0.584-0.338-0.893-0.482-2.524 4.838-7.11 10.595-13.178 13.87 0.35 0.785 0.793 1.495 1.316 2.125 5.217-3.587 10.049-9.587 12.754-15.512z"></path>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M72.863 4.041c-1.248-0.543-2.661-0.834-4.194-0.834-5.676 0-9.686 4.381-9.686 10.149 0 0.973 0.103 1.89 0.298 2.746 5.806-2.367 10.966-7.584 13.582-12.061z"></path>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M74.203 4.762c-2.978 7.323-6.607 12.506-11.242 16.964 1.566 1.087 3.515 1.686 5.708 1.686 5.677 0 9.686-4.411 9.686-10.18 0-3.822-1.582-6.787-4.151-8.47z"></path>
    <path fill="#3e8ede" style="fill: var(--color11, #FFFFFF)" d="M78.354 4.122v-0.015c0-1.361 1.103-2.507 2.494-2.507 1.404 0 2.494 1.132 2.494 2.494v0.014c0 1.362-1.103 2.508-2.494 2.508-1.404 0.001-2.494-1.132-2.494-2.493zM83.054 4.107v-0.014c0-1.218-0.946-2.222-2.207-2.222-1.247 0-2.207 1.018-2.207 2.235v0.015c0 1.218 0.946 2.221 2.207 2.221 1.247 0 2.207-1.017 2.207-2.236zM79.873 2.79h1.146c0.559 0 0.975 0.272 0.975 0.802 0 0.416-0.244 0.674-0.588 0.774l0.674 0.96h-0.587l-0.602-0.874h-0.531v0.874h-0.487v-2.536zM80.977 4.050c0.33 0 0.516-0.172 0.516-0.416 0-0.272-0.186-0.415-0.516-0.415h-0.617v0.831h0.617z"></path>
</svg>
    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/tci-flogo/introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/introduction/">
          <i class="fa fa-home" aria-hidden="true"></i> Introduction
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/" title="Building extensions" class="dd-item 
        parent
        
        
        ">
      <a href="/tci-flogo/building-extensions/">
          <i class="fa fa-wrench" aria-hidden="true"></i> Building extensions
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/" title="Getting started" class="dd-item 
        parent
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Getting started
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/dev-environment/" title="Set up your environment" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/dev-environment/">
          Set up your environment
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/dev-environment/intellij-webstorm/" title="Using Goland" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/dev-environment/intellij-webstorm/">
        Using Goland
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/dev-environment/vscode/" title="Using VS Code" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/dev-environment/vscode/">
        Using VS Code
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/" title="Prerequisites" class="dd-item 
        parent
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/">
          Prerequisites
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/use-project-flogo/" title="Use Project Flogo Extension" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/use-project-flogo/">
        Use Project Flogo Extension
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new/" title="Create New Extensions" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new/">
        Create New Extensions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-extension/" title="Create Single Extension" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-extension/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Create Single Extension
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/" title="Create Categorized Extension" class="dd-item 
        parent
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Create Categorized Extension
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/" title="Understanding of category" class="dd-item 
        parent
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Understanding of category
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/" title="Extension" class="dd-item 
        parent
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Extension
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/layout-widgets/" title="Layout and Widgets" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/layout-widgets/">
        Layout and Widgets
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/connection-model-runtime/" title="Connection Model and Runtime" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/connection-model-runtime/">
        Connection Model and Runtime
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/activity-model-runtime/" title="Activity Model and Runtime" class="dd-item active">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/activity-model-runtime/">
        Activity Model and Runtime
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/trigger-model-runtime/" title="Trigger Model and Runtime" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/trigger-model-runtime/">
        Trigger Model and Runtime
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/function/" title="Function" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/function/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Function
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/function/layout/" title="Layout" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/function/layout/">
        Layout
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/function/function-model-runtime/" title="Function model and runtime" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/function/function-model-runtime/">
        Function model and runtime
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/" title="Building your category" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Building your category
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/" title="Extension" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Extension
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/import-template/" title="Import Template" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/import-template/">
        Import Template
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/changes-connection/" title="Edit Connection" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/changes-connection/">
        Edit Connection
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/changes-activity/" title="Edit Activity" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/changes-activity/">
        Edit Activity
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/changes-trigger/" title="Edit Trigger" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/changes-trigger/">
        Edit Trigger
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/utils/" title="Useful UI utils Method" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/extension/utils/">
        Useful UI utils Method
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/function/" title="Function" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/function/">
          <i class="fa fa-bolt" aria-hidden="true"></i> Function
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/function/import-template/" title="Import Template" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/function/import-template/">
        Import Template
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/function/changes-function/" title="Edit Template" class="dd-item ">
        <a href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/building-your-own-category/function/changes-function/">
        Edit Template
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/upload/" title="Upload to TCI or FE" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/upload/">
          <i class="fa fa-upload" aria-hidden="true"></i> Upload to TCI or FE
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/sample-extensions/" title="Sample Extensions" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/sample-extensions/">
          <i class="fa fa-cogs" aria-hidden="true"></i> Sample Extensions
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/sample-extensions/concat/" title="Concat" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/sample-extensions/concat/">
          Concat
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tci-flogo/building-extensions/sample-extensions/amazon-sqs/" title="Amazon SQS" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/building-extensions/sample-extensions/amazon-sqs/">
          Amazon SQS
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/tci-flogo/sdk/" title="SDK" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/sdk/">
          <i class="fa fa-list-alt" aria-hidden="true"></i> SDK
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/tci-flogo/template/" title="Templates" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/template/">
          <i class="fa fa-list-alt" aria-hidden="true"></i> Templates
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/tci-flogo/contribute/" title="Contribute" class="dd-item 
        
        
        
        ">
      <a href="/tci-flogo/contribute/">
          <i class="fa fa-share-alt" aria-hidden="true"></i> Contribute
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li class="" role=""> 
                  <a class="padding" href="https://github.com/TIBCOSoftware/tci-flogo"><i class='fa fa-github'></i> Github repo</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://tibcosoftware.github.io/tci-awesome"><i class='fa fa-camera'></i> Showcases</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://integration.cloud.tibco.com/docs/index.html"><i class='fa fa-book'></i> TCI docs</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://docs.tibco.com/products/tibco-flogo-enterprise"><i class='fa fa-book'></i> TIBCO Flogo Enterprise docs</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://tibcosoftware.github.io/tci-flogo/wi-studio/v1.3.0/"><i class='fa fa-book'></i> Designtime API docs v1.3.0</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://pkg.go.dev/github.com/project-flogo/core@v1.3.0"><i class='fa fa-book'></i> Runtime API docs v1.3.0</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <center>
    
    <a class="github-button" href="https://github.com/TIBCOSoftware/tci-webintegrator/archive/master.zip" data-icon="octicon-cloud-download" aria-label="Download TIBCOSoftware/tci-flogo on GitHub">Download</a>

    
    <a class="github-button" href="https://github.com/TIBCOSoftware/tci-webintegrator" data-icon="octicon-star" data-show-count="true" aria-label="Star TIBCOSoftware/tci-flogo on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/TIBCOSoftware/tci-webintegrator/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork TIBCOSoftware/tci-flogo on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable sticky-parent">
              
              <div class="sticky-spacer">
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/tci-flogo/'></a> > <a href='/tci-flogo/building-extensions/'>Building extensions</a> > <a href='/tci-flogo/building-extensions/getting-started/'>Getting started</a> > <a href='/tci-flogo/building-extensions/getting-started/prerequisites/'>Prerequisites</a> > <a href='/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/'>Create Categorized Extension</a> > <a href='/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/'>Understanding of category</a> > <a href='/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/'>Extension</a> > Activity Model and Runtime
          
         
          
         
          
         
          
         
          
         
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#model">Model</a></li>
    <li><a href="#validation">Validation</a></li>
    <li><a href="#configuring-your-user-interface">Configuring your user interface</a>
      <ul>
        <li><a href="#configuration">Configuration</a></li>
        <li><a href="#input">Input</a></li>
        <li><a href="#input-settings">Input settings</a></li>
        <li><a href="#output">Output</a></li>
        <li><a href="#output-settings">Output settings</a></li>
      </ul>
    </li>
    <li><a href="#runtime">Runtime</a></li>
    <li><a href="#activitygo">activity.go</a></li>
    <li><a href="#ui-contribution">UI Contribution</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Activity Model and Runtime</h1>
          

        


<h2 id="model">Model</h2>
<p>The <code>descriptor.json</code> describes the model, the metadata, of the activity. It describes, among other things, what the input and outputs are, who built it and which version you&rsquo;re using. The below code explains which fields are in the JSON document as well as what kind of values are allowed. For more samples, check out the samples section!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;sqssendmessage&#34;</span>,
  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.0.0&#34;</span>,
  <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;TIBCO Software Inc.&#34;</span>,
  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;flogo:activity&#34;</span>,
  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Send SQS Message&#34;</span>,

  <span style="color:#f92672">&#34;display&#34;</span>: {
    <span style="color:#f92672">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;AWSSQS&#34;</span>,
    <span style="color:#f92672">&#34;visible&#34;</span>: <span style="color:#66d9ef">true</span>,
    <span style="color:#f92672">&#34;smallIcon&#34;</span>: <span style="color:#e6db74">&#34;sqssendmessage.png&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;This activity sends a message to the standard queue&#34;</span>
  },

  <span style="color:#f92672">&#34;ref&#34;</span>: <span style="color:#e6db74">&#34;github.com/TIBCOSoftware/tci-flogo/samples/extensions/AWSSQS/activity/sqssendmessage&#34;</span>,
  <span style="color:#f92672">&#34;settings&#34;</span>: [
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;sqsConnection&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;connection&#34;</span>,
      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>,
      <span style="color:#f92672">&#34;display&#34;</span>:{
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;SQS Connection&#34;</span>,
        <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Select SQS Connection&#34;</span>,
        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;connection&#34;</span>
      },
      <span style="color:#f92672">&#34;allowed&#34;</span>:[]
    },
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;queueUrl&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;string&#34;</span>,
      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>,
      <span style="color:#f92672">&#34;display&#34;</span>:{
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Queue URL&#34;</span>,
        <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Select Queue URL&#34;</span>
      },
      <span style="color:#f92672">&#34;allowed&#34;</span>:[]
    },
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;DelaySeconds&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;integer&#34;</span>,
      <span style="color:#f92672">&#34;display&#34;</span>:{
        <span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;Delay&#34;</span>,
        <span style="color:#f92672">&#34;description&#34;</span>:<span style="color:#e6db74">&#34;Delay Description&#34;</span>
      },
      <span style="color:#f92672">&#34;value&#34;</span> : <span style="color:#ae81ff">0</span>
    }
  ],
  <span style="color:#f92672">&#34;inputs&#34;</span>: [
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;MessageAttributeNames&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;array&#34;</span>,
      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">false</span>,
      <span style="color:#f92672">&#34;display&#34;</span>: {
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Message Attributes&#34;</span>,
        <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Set message attributes&#34;</span>,
        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;table&#34;</span>,
        <span style="color:#f92672">&#34;schema&#34;</span>: <span style="color:#e6db74">&#34;{\r\n    \&#34;$schema\&#34;: \&#34;http:\/\/json-schema.org\/draft-04\/schema#\&#34;,\r\n    \&#34;definitions\&#34;: {},\r\n    \&#34;id\&#34;: \&#34;http:\/\/example.com\/example.json\&#34;,\r\n    \&#34;items\&#34;: {\r\n        \&#34;id\&#34;: \&#34;\/items\&#34;,\r\n        \&#34;properties\&#34;: {\r\n            \&#34;Name\&#34;: {\r\n                \&#34;id\&#34;: \&#34;\/items\/properties\/Name\&#34;,\r\n                \&#34;type\&#34;: \&#34;string\&#34;\r\n            },\r\n            \&#34;Type\&#34;: {\r\n                \&#34;id\&#34;: \&#34;\/items\/properties\/Type\&#34;,\r\n                \&#34;type\&#34;: {\&#34;enum\&#34;:[\&#34;String\&#34;, \&#34;Number\&#34;]}\r\n            }\r\n        },\r\n        \&#34;type\&#34;: \&#34;object\&#34;\r\n    },\r\n    \&#34;type\&#34;: \&#34;array\&#34;\r\n}&#34;</span>,
        <span style="color:#f92672">&#34;inputSettingsOnly&#34;</span>:<span style="color:#66d9ef">true</span>
      }
    },
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;MessageAttributes&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;object&#34;</span>,
      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">false</span>
    },
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;MessageBody&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;string&#34;</span>,
      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>
    }
  ],

  <span style="color:#f92672">&#34;outputs&#34;</span>: [
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;MessageId&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;string&#34;</span>
    }
  ]
}
</code></pre></div><h2 id="validation">Validation</h2>
<p>When creating the <code>descriptor.json</code> file, there are a few validation rules that you need take into account:</p>
<ul>
<li><strong>name</strong>: The name should only contain alphanumeric chararcters and underscores</li>
<li><strong>title</strong>: The title of your activity (which also shows up on your activity) should only contain alphanumeric characters and spaces</li>
<li><strong>version</strong>: The version of your activity follows the semver notation (x.y.z), with numeric characters separated by dots</li>
<li><strong>type</strong>: The type must always be <strong>flogo:activity</strong></li>
<li><strong>ref</strong>: The ref field must be in the form of <code>&lt;category&gt;/activity/&lt;activityname&gt;</code> and the category and activity name must be the exact same case as the category and name specified above</li>
<li><strong>type</strong> <em>under inputs</em>: The <a href="../display-settings">type</a> can be either one of the types in the <a href="../display-settings/#types">Types</a> section if it is part of the input or the <a href="../display-settings/#special-types">Special types</a> if it is part of the display section.</li>
</ul>
<h2 id="configuring-your-user-interface">Configuring your user interface</h2>
<p>The user interface is divided into five main sections and these sections are populated based on the configuration you create above. The five main sections are:</p>
<ul>
<li>Configuration</li>
<li>Input</li>
<li>Input settings</li>
<li>Output</li>
<li>Output settings</li>
</ul>
<h3 id="configuration">Configuration</h3>
<p>Any element in the <strong>settings</strong> or <strong>Input</strong>section of your activity <code>descriptor.json</code> that has a <strong>display</strong> element associated with it will be shown in the configuration section:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;sqsConnection&#34;</span>,
  <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;connection&#34;</span>,
  <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>,
  <span style="color:#f92672">&#34;display&#34;</span>:{
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;SQS Connection&#34;</span>,
    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Select SQS Connection&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;connection&#34;</span>
  },
  <span style="color:#f92672">&#34;allowed&#34;</span>:[]
}
</code></pre></div><h3 id="input">Input</h3>
<p>Any element in the <strong>inputs</strong> section of your <code>activity.json</code> that doesn&rsquo;t have a <strong>display</strong> element associated with it will be shown in the input section so you can still use it in the mapper.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;value1&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;string&#34;</span>,
    <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>
}
</code></pre></div><h3 id="input-settings">Input settings</h3>
<p>Any element in the <strong>inputs</strong> section of your <code>activity.json</code> that has a <strong>display</strong> element associated with it and has a schema associated with it will be shown in the Input settings section. Note that you also need to set the <strong>mappable</strong> element to true.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;MessageAttributeNames&#34;</span>,
      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;array&#34;</span>,
      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">false</span>,
      <span style="color:#f92672">&#34;display&#34;</span>: {
        <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Message Attributes&#34;</span>,
        <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Set message attributes&#34;</span>,
        <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;table&#34;</span>,
        <span style="color:#f92672">&#34;schema&#34;</span>: <span style="color:#e6db74">&#34;{\r\n    \&#34;$schema\&#34;: \&#34;http:\/\/json-schema.org\/draft-04\/schema#\&#34;,\r\n    \&#34;definitions\&#34;: {},\r\n    \&#34;id\&#34;: \&#34;http:\/\/example.com\/example.json\&#34;,\r\n    \&#34;items\&#34;: {\r\n        \&#34;id\&#34;: \&#34;\/items\&#34;,\r\n        \&#34;properties\&#34;: {\r\n            \&#34;Name\&#34;: {\r\n                \&#34;id\&#34;: \&#34;\/items\/properties\/Name\&#34;,\r\n                \&#34;type\&#34;: \&#34;string\&#34;\r\n            },\r\n            \&#34;Type\&#34;: {\r\n                \&#34;id\&#34;: \&#34;\/items\/properties\/Type\&#34;,\r\n                \&#34;type\&#34;: {\&#34;enum\&#34;:[\&#34;String\&#34;, \&#34;Number\&#34;]}\r\n            }\r\n        },\r\n        \&#34;type\&#34;: \&#34;object\&#34;\r\n    },\r\n    \&#34;type\&#34;: \&#34;array\&#34;\r\n}&#34;</span>,
        <span style="color:#f92672">&#34;inputSettingsOnly&#34;</span>:<span style="color:#66d9ef">true</span>
      }
    }
</code></pre></div><h3 id="output">Output</h3>
<p>Any element in the <strong>outputs</strong> section of your <code>activity.json</code> that doesn&rsquo;t have a <strong>display</strong> element associated with it will be shown in the output section so you use it in the inputs for activities in the rest of your flow.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;result&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;string&#34;</span>
}
</code></pre></div><h3 id="output-settings">Output settings</h3>
<p>Any element in the <strong>outputs</strong> section of your <code>activity.json</code> that has a <strong>display</strong> element associated with it and has a schema associated with it will be shown in the Output settings section. Note that you also need to set the <strong>mappable</strong> element to true.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">
</code></pre></div><h2 id="runtime">Runtime</h2>
<p>Every extension must write the runtime code in Go (<code>activity.go</code>). You can, and really should, leverage the Go testing framework for writing unit test cases (<code>activity_test.go</code>) for your extension.</p>
<ul>
<li>Interface of activity <a href="https://github.com/project-flogo/core/blob/master/activity/activity.go#L9">Here</a></li>
</ul>
<h2 id="activitygo">activity.go</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">/*
</span><span style="color:#75715e"> * Copyright © 2017. TIBCO Software Inc.
</span><span style="color:#75715e"> * This file is subject to the license terms contained
</span><span style="color:#75715e"> * in the license file that is distributed with this file.
</span><span style="color:#75715e"> */</span>

<span style="color:#f92672">package</span> <span style="color:#a6e22e">sqssendmessage</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;github.com/aws/aws-sdk-go/aws&#34;</span>
	<span style="color:#e6db74">&#34;github.com/aws/aws-sdk-go/service/sqs&#34;</span>
	<span style="color:#e6db74">&#34;github.com/pkg/errors&#34;</span>
	<span style="color:#e6db74">&#34;github.com/project-flogo/core/activity&#34;</span>
	<span style="color:#e6db74">&#34;github.com/project-flogo/core/data/coerce&#34;</span>
	<span style="color:#e6db74">&#34;github.com/project-flogo/core/data/metadata&#34;</span>
	<span style="color:#e6db74">&#34;github.com/project-flogo/core/support/log&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
	<span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">Register</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">SQSSendMessageActivity</span>{}, <span style="color:#a6e22e">New</span>)
}

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">activityLog</span> = <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">ChildLogger</span>(<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">RootLogger</span>(), <span style="color:#e6db74">&#34;aws-activity-sqssendmessage&#34;</span>)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">activityMd</span> = <span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">ToMetadata</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Settings</span>{}, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Input</span>{}, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Output</span>{})

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">SQSSendMessageActivity</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">settings</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Settings</span>
	<span style="color:#a6e22e">sqssvc</span>   <span style="color:#f92672">*</span><span style="color:#a6e22e">sqs</span>.<span style="color:#a6e22e">SQS</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">InitContext</span>) (<span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">Activity</span>, <span style="color:#66d9ef">error</span>) {
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Settings</span>{}
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">metadata</span>.<span style="color:#a6e22e">MapToStruct</span>(<span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">Settings</span>(), <span style="color:#a6e22e">s</span>, <span style="color:#66d9ef">true</span>)

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
	}

	<span style="color:#a6e22e">cm</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">coerce</span>.<span style="color:#a6e22e">ToConnection</span>(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">SQSConnection</span>)

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
	}

	<span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cm</span>.<span style="color:#a6e22e">GetConnection</span>().(<span style="color:#f92672">*</span><span style="color:#a6e22e">sqs</span>.<span style="color:#a6e22e">SQS</span>)
	<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">ok</span> {
		<span style="color:#a6e22e">activityLog</span>.<span style="color:#a6e22e">Error</span>(<span style="color:#e6db74">&#34;Connection Error&#34;</span>)
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;Connection Error&#34;</span>)
	}

	<span style="color:#a6e22e">act</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">SQSSendMessageActivity</span>{<span style="color:#a6e22e">settings</span>: <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">sqssvc</span>: <span style="color:#a6e22e">c</span>}
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">act</span>, <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">SQSSendMessageActivity</span>) <span style="color:#a6e22e">Metadata</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">Metadata</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">activityMd</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">SQSSendMessageActivity</span>) <span style="color:#a6e22e">Eval</span>(<span style="color:#a6e22e">context</span> <span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">Context</span>) (<span style="color:#a6e22e">done</span> <span style="color:#66d9ef">bool</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>) {

	<span style="color:#a6e22e">input</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Input</span>{}

	<span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">GetInputObject</span>(<span style="color:#a6e22e">input</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">err</span>
	}

	<span style="color:#a6e22e">activityLog</span>.<span style="color:#a6e22e">Info</span>(<span style="color:#e6db74">&#34;Executing SQS Send Message activity&#34;</span>)

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">settings</span>.<span style="color:#a6e22e">QueueURL</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">NewError</span>(<span style="color:#e6db74">&#34;SQS Queue URL is not configured&#34;</span>, <span style="color:#e6db74">&#34;SQS-SENDMESSAGE-4002&#34;</span>, <span style="color:#66d9ef">nil</span>)
	}

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">MessageBody</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">NewError</span>(<span style="color:#e6db74">&#34;Message body is not configured&#34;</span>, <span style="color:#e6db74">&#34;SQS-SENDMESSAGE-4003&#34;</span>, <span style="color:#66d9ef">nil</span>)
	}

	<span style="color:#a6e22e">sqsSvc</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">sqssvc</span>
	<span style="color:#a6e22e">sendMessageInput</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">sqs</span>.<span style="color:#a6e22e">SendMessageInput</span>{}
	<span style="color:#a6e22e">sendMessageInput</span>.<span style="color:#a6e22e">QueueUrl</span> = <span style="color:#a6e22e">aws</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">settings</span>.<span style="color:#a6e22e">QueueURL</span>)
	<span style="color:#a6e22e">sendMessageInput</span>.<span style="color:#a6e22e">MessageBody</span> = <span style="color:#a6e22e">aws</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">MessageBody</span>)

	<span style="color:#a6e22e">messageAttributes</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">MessageAttributes</span>
	<span style="color:#a6e22e">attrsName</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">MessageAttributeNames</span>
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">messageAttributes</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">attrsName</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {

		<span style="color:#75715e">//Read mapped values
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">messageAttributes</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#a6e22e">msgAttrs</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">coerce</span>.<span style="color:#a6e22e">ToObject</span>(<span style="color:#a6e22e">messageAttributes</span>)
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">msgAttrs</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
				<span style="color:#75715e">//Read table values
</span><span style="color:#75715e"></span>				<span style="color:#a6e22e">attrs</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#f92672">*</span><span style="color:#a6e22e">sqs</span>.<span style="color:#a6e22e">MessageAttributeValue</span>, len(<span style="color:#a6e22e">msgAttrs</span>))
				<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">attrsName</span> {
					<span style="color:#a6e22e">attr</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">coerce</span>.<span style="color:#a6e22e">ToObject</span>(<span style="color:#a6e22e">v</span>)
					<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">attr</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Name&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Type&#34;</span>] <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
						<span style="color:#75715e">// Has mapped value??
</span><span style="color:#75715e"></span>						<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">msgAttrs</span>[<span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Name&#34;</span>].(<span style="color:#66d9ef">string</span>)] <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
							<span style="color:#a6e22e">attrVal</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">coerce</span>.<span style="color:#a6e22e">ToString</span>(<span style="color:#a6e22e">msgAttrs</span>[<span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Name&#34;</span>].(<span style="color:#66d9ef">string</span>)])
							<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Type&#34;</span>].(<span style="color:#66d9ef">string</span>) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Number&#34;</span> {
								<span style="color:#a6e22e">attrVal</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">coerce</span>.<span style="color:#a6e22e">ToString</span>(int(<span style="color:#a6e22e">msgAttrs</span>[<span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Name&#34;</span>].(<span style="color:#66d9ef">string</span>)].(<span style="color:#66d9ef">int64</span>)))
							}
							<span style="color:#a6e22e">attrs</span>[<span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Name&#34;</span>].(<span style="color:#66d9ef">string</span>)] = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">sqs</span>.<span style="color:#a6e22e">MessageAttributeValue</span>{
								<span style="color:#a6e22e">DataType</span>:    <span style="color:#a6e22e">aws</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">attr</span>[<span style="color:#e6db74">&#34;Type&#34;</span>].(<span style="color:#66d9ef">string</span>)),
								<span style="color:#a6e22e">StringValue</span>: <span style="color:#a6e22e">aws</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">attrVal</span>),
							}
						}
					}
				}
				<span style="color:#a6e22e">sendMessageInput</span>.<span style="color:#a6e22e">MessageAttributes</span> = <span style="color:#a6e22e">attrs</span>
			}
		}
	}

	<span style="color:#a6e22e">delaySeconds</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">settings</span>.<span style="color:#a6e22e">Delay</span>
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">delaySeconds</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
		<span style="color:#a6e22e">sendMessageInput</span>.<span style="color:#a6e22e">DelaySeconds</span> = <span style="color:#a6e22e">aws</span>.<span style="color:#a6e22e">Int64</span>(int64(<span style="color:#a6e22e">delaySeconds</span>))
	}

	<span style="color:#75715e">//Send message to SQS
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">response</span>, <span style="color:#a6e22e">err1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sqsSvc</span>.<span style="color:#a6e22e">SendMessage</span>(<span style="color:#a6e22e">sendMessageInput</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err1</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">activity</span>.<span style="color:#a6e22e">NewError</span>(<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;Failed to send message to SQS due to error:%s&#34;</span>, <span style="color:#a6e22e">err1</span>.<span style="color:#a6e22e">Error</span>()), <span style="color:#e6db74">&#34;SQS-SENDMESSAGE-4005&#34;</span>, <span style="color:#66d9ef">nil</span>)
	}

	<span style="color:#75715e">//Set Message ID in the output
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">output</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Output</span>{}
	<span style="color:#a6e22e">output</span>.<span style="color:#a6e22e">MessageId</span> = <span style="color:#f92672">*</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">MessageId</span>
	<span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">SetOutputObject</span>(<span style="color:#a6e22e">output</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;error setting output for Activity [%s]: %s&#34;</span>, <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Name</span>(), <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">Error</span>())
	}
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">nil</span>
}

</code></pre></div><h2 id="ui-contribution">UI Contribution</h2>
<p>The <code>activity.ts</code> file handles the validation and actions for the fields described in the model.
For example,  it validates that a valid connection has been chosen, or retrieves additional information based on values in certain fields.
This part is optional and you can rely on the out of the box UI as well! The <code>activity.module.ts</code> makes sure that Flogo knows about your extension and injects the validation rules into it. This isn&rsquo;t the full code, so if you want to see a sample check out the samples section!</p>
<p>There are 2 functions in <code>connector.ts</code></p>
<ul>
<li><em>value</em> Setting field&rsquo;s value, the value can be set hardcoded value or get value from network in ts.</li>
<li><em>Validate</em> Show validation error in UI or set ready only or visibility base on field relationship.</li>
</ul>
<p>Above are same with <a href="../connection-model-runtime">Connection</a> UI Contribution</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#75715e">/*
</span><span style="color:#75715e"> * Copyright © 2017. TIBCO Software Inc.
</span><span style="color:#75715e"> * This file is subject to the license terms contained
</span><span style="color:#75715e"> * in the license file that is distributed with this file.
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Observable</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;rxjs/Observable&#34;</span>;
<span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Injectable</span>, <span style="color:#a6e22e">Injector</span>, <span style="color:#a6e22e">Inject</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@angular/core&#34;</span>;
<span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Http</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@angular/http&#34;</span>;
<span style="color:#66d9ef">import</span> {
    <span style="color:#a6e22e">WiContrib</span>,
    <span style="color:#a6e22e">WiServiceHandlerContribution</span>,
    <span style="color:#a6e22e">IValidationResult</span>,
    <span style="color:#a6e22e">ValidationResult</span>,
    <span style="color:#a6e22e">IFieldDefinition</span>,
    <span style="color:#a6e22e">IActivityContribution</span>,
    <span style="color:#a6e22e">IConnectorContribution</span>,
    <span style="color:#a6e22e">WiContributionUtils</span>
} <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;wi-studio/app/contrib/wi-contrib&#34;</span>;
<span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">AWS</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;aws-sdk&#34;</span>;

<span style="color:#66d9ef">@WiContrib</span>({})
<span style="color:#66d9ef">@Injectable</span>()
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SendMsgActivityContribution</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">WiServiceHandlerContribution</span> {
    <span style="color:#66d9ef">constructor</span>( <span style="color:#66d9ef">@Inject</span>(<span style="color:#a6e22e">Injector</span>) <span style="color:#a6e22e">injector</span>, <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">http</span>: <span style="color:#66d9ef">Http</span>) {
        <span style="color:#66d9ef">super</span>(<span style="color:#a6e22e">injector</span>, <span style="color:#a6e22e">http</span>);
    }

    <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">fieldName</span>: <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">context</span>: <span style="color:#66d9ef">IActivityContribution</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Observable</span>&lt;<span style="color:#f92672">any</span>&gt; <span style="color:#f92672">|</span> <span style="color:#66d9ef">any</span> <span style="color:#f92672">=&gt;</span> {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">fieldName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;sqsConnection&#34;</span>) {
            <span style="color:#75715e">//Connector Type must match with the category defined in connector.json
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Observable</span>.<span style="color:#a6e22e">create</span>(<span style="color:#a6e22e">observer</span> <span style="color:#f92672">=&gt;</span> {
                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">connectionRefs</span> <span style="color:#f92672">=</span> [];
                <span style="color:#a6e22e">WiContributionUtils</span>.<span style="color:#a6e22e">getConnections</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">http</span>, <span style="color:#e6db74">&#34;AWSSQS&#34;</span>).<span style="color:#a6e22e">subscribe</span>((<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">IConnectorContribution</span>[]) <span style="color:#f92672">=&gt;</span> {
                    <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">connection</span> <span style="color:#f92672">=&gt;</span> {
                        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">connection</span>.<span style="color:#a6e22e">settings</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
                            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">connection</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;name&#34;</span>) {
                                <span style="color:#a6e22e">connectionRefs</span>.<span style="color:#a6e22e">push</span>({
                                    <span style="color:#e6db74">&#34;unique_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">WiContributionUtils</span>.<span style="color:#a6e22e">getUniqueId</span>(<span style="color:#a6e22e">connection</span>),
                                    <span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">connection</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>
                                });
                                <span style="color:#66d9ef">break</span>;
                            }
                        }
                    });
                    <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">connectionRefs</span>);
                });
            });
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">fieldName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;MessageAttributes&#34;</span>) {
            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">msgAttrNames</span>: <span style="color:#66d9ef">IFieldDefinition</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">getField</span>(<span style="color:#e6db74">&#34;MessageAttributeNames&#34;</span>);
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">msgAttrNames</span>.<span style="color:#a6e22e">value</span>) {
                <span style="color:#75715e">// Read message attrbutes and construct JSON schema on the fly for the activity input
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">jsonSchema</span> <span style="color:#f92672">=</span> {};
                <span style="color:#75715e">// Convert string value into JSON object
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">msgAttrNames</span>.<span style="color:#a6e22e">value</span>);
                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;String&#34;</span>) {
                        <span style="color:#a6e22e">jsonSchema</span>[<span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Name</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abc&#34;</span>;
                    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Type</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;Number&#34;</span>) {
                        <span style="color:#a6e22e">jsonSchema</span>[<span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">Name</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
                    }
                }
                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">jsonSchema</span>);
            }
            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;{}&#34;</span>;
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">fieldName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;queueUrl&#34;</span>) {
            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">connectionField</span>: <span style="color:#66d9ef">IFieldDefinition</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">getField</span>(<span style="color:#e6db74">&#34;sqsConnection&#34;</span>);
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">connectionField</span>.<span style="color:#a6e22e">value</span>) {
                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Observable</span>.<span style="color:#a6e22e">create</span>(<span style="color:#a6e22e">observer</span> <span style="color:#f92672">=&gt;</span> {
                        <span style="color:#75715e">//Read connection configuration
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">queueUrls</span> <span style="color:#f92672">=</span> [];
                        <span style="color:#a6e22e">WiContributionUtils</span>.<span style="color:#a6e22e">getConnection</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">http</span>, <span style="color:#a6e22e">connectionField</span>.<span style="color:#a6e22e">value</span>)
                            .<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">data</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">data</span>)
                            .<span style="color:#a6e22e">subscribe</span>(<span style="color:#a6e22e">data</span> <span style="color:#f92672">=&gt;</span> {
                                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">keyId</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#a6e22e">secretKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#a6e22e">region</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
                                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">useAssumeRole</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
                                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">roleArn</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#a6e22e">roleSessionName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#a6e22e">externalId</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
                                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>
                                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;accessKeyId&#34;</span>) {
                                        <span style="color:#a6e22e">keyId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;secretAccessKey&#34;</span>) {
                                        <span style="color:#a6e22e">secretKey</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;region&#34;</span>) {
                                        <span style="color:#a6e22e">region</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;assumeRole&#34;</span>) {
                                        <span style="color:#a6e22e">useAssumeRole</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;roleArn&#34;</span>) {
                                        <span style="color:#a6e22e">roleArn</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;roleSessionName&#34;</span>) {
                                        <span style="color:#a6e22e">roleSessionName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;externalId&#34;</span>) {
                                        <span style="color:#a6e22e">externalId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;expirationDuration&#34;</span>) {
                                        <span style="color:#a6e22e">duration</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">settings</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>;
                                    }
                                }

                                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">awsCredential</span> <span style="color:#f92672">=</span> {
                                    <span style="color:#a6e22e">accessKeyId</span>: <span style="color:#66d9ef">keyId</span>,
                                    <span style="color:#a6e22e">secretAccessKey</span>: <span style="color:#66d9ef">secretKey</span>,
                                    <span style="color:#a6e22e">region</span>: <span style="color:#66d9ef">region</span>,
                                    <span style="color:#a6e22e">sessionToken</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;&#34;</span>
                                };

                                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">useAssumeRole</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">true</span>) {
                                    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Assume role&#34;</span>)
                                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AWS</span>.<span style="color:#a6e22e">STS</span>(<span style="color:#a6e22e">awsCredential</span>);
                                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">assumeRoleParam</span> <span style="color:#f92672">=</span> {
                                        <span style="color:#a6e22e">RoleArn</span>: <span style="color:#66d9ef">roleArn</span>,
                                        <span style="color:#a6e22e">RoleSessionName</span>: <span style="color:#66d9ef">roleSessionName</span>,
                                        <span style="color:#a6e22e">ExternalId</span>: <span style="color:#66d9ef">externalId</span>,
                                        <span style="color:#a6e22e">DurationSeconds</span>: <span style="color:#66d9ef">duration</span>
                                    };
                                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">externalId</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;&#34;</span>) {
                                        <span style="color:#66d9ef">delete</span> <span style="color:#a6e22e">assumeRoleParam</span>.<span style="color:#a6e22e">ExternalId</span>
                                    }
                                    <span style="color:#a6e22e">sts</span>.<span style="color:#a6e22e">assumeRole</span>(<span style="color:#a6e22e">assumeRoleParam</span>, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) <span style="color:#f92672">=&gt;</span> {
                                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
                                            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;error occured...........&#34;</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>))
                                            <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">queueUrls</span>);
                                            <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">complete</span>();
                                        }<span style="color:#66d9ef">else</span> {
                                            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Assume role call observer next&#34;</span>)
                                            <span style="color:#a6e22e">awsCredential</span>.<span style="color:#a6e22e">accessKeyId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">Credentials</span>.<span style="color:#a6e22e">AccessKeyId</span>
                                            <span style="color:#a6e22e">awsCredential</span>.<span style="color:#a6e22e">secretAccessKey</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">Credentials</span>.<span style="color:#a6e22e">SecretAccessKey</span>
                                            <span style="color:#a6e22e">awsCredential</span>.<span style="color:#a6e22e">sessionToken</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">Credentials</span>.<span style="color:#a6e22e">SessionToken</span>

                                            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">params</span> <span style="color:#f92672">=</span> {};
                                            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">sqs</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AWS</span>.<span style="color:#a6e22e">SQS</span>(<span style="color:#a6e22e">awsCredential</span>)
                                            <span style="color:#a6e22e">sqs</span>.<span style="color:#a6e22e">listQueues</span>(<span style="color:#a6e22e">params</span>, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) <span style="color:#f92672">=&gt;</span> {
                                                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
                                                    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;error occured...........&#34;</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>))
                                                    <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">queueUrls</span>);
                                                }<span style="color:#66d9ef">else</span> {
                                                    <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">QueueUrls</span>);
                                                }
                                                <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">complete</span>();
                                            });
                                        }
                                    });
                                }<span style="color:#66d9ef">else</span> {
                                    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sqs</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AWS</span>.<span style="color:#a6e22e">SQS</span>({
                                        <span style="color:#a6e22e">credentials</span>: <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AWS</span>.<span style="color:#a6e22e">Credentials</span>(<span style="color:#a6e22e">keyId</span>, <span style="color:#a6e22e">secretKey</span>), <span style="color:#a6e22e">region</span>: <span style="color:#66d9ef">region</span>
                                    });
                                    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">params</span> <span style="color:#f92672">=</span> {};
                                    <span style="color:#a6e22e">sqs</span>.<span style="color:#a6e22e">listQueues</span>(<span style="color:#a6e22e">params</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) {
                                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
                                            <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">queueUrls</span>);
                                        } <span style="color:#66d9ef">else</span> {
                                            <span style="color:#a6e22e">observer</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">QueueUrls</span>);
                                        }
                                    });
                                }
                            });
                    }
                );
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>;
    }

    <span style="color:#a6e22e">validate</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">fieldName</span>: <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">context</span>: <span style="color:#66d9ef">IActivityContribution</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Observable</span>&lt;<span style="color:#f92672">IValidationResult</span>&gt; <span style="color:#f92672">|</span> <span style="color:#a6e22e">IValidationResult</span> <span style="color:#f92672">=&gt;</span> {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">fieldName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;sqsConnection&#34;</span>) {
            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">connection</span>: <span style="color:#66d9ef">IFieldDefinition</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">getField</span>(<span style="color:#e6db74">&#34;sqsConnection&#34;</span>)
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">connection</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span>) {
                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ValidationResult</span>.<span style="color:#a6e22e">newValidationResult</span>().<span style="color:#a6e22e">setError</span>(<span style="color:#e6db74">&#34;AWS-SEND-MSG-1000&#34;</span>, <span style="color:#e6db74">&#34;SQS Connection must be configured&#34;</span>);
            }
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">fieldName</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;queueUrl&#34;</span>) {
            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">queueUrl</span>: <span style="color:#66d9ef">IFieldDefinition</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">getField</span>(<span style="color:#e6db74">&#34;queueUrl&#34;</span>)
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">queueUrl</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span>) {
                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ValidationResult</span>.<span style="color:#a6e22e">newValidationResult</span>().<span style="color:#a6e22e">setError</span>(<span style="color:#e6db74">&#34;AWS-SEND-MSG-1001&#34;</span>, <span style="color:#e6db74">&#34;Queue URL must be configured&#34;</span>);
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>;
    }
}

</code></pre></div>

<footer class=" footline" >
	
</footer>


        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/connection-model-runtime/" title="Connection Model and Runtime"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/tci-flogo/building-extensions/getting-started/prerequisites/create-new-category/understanding-of-category/extension/trigger-model-runtime/" title="Trigger Model and Runtime" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/tci-flogo/js/clipboard.min.js?1623302974"></script>
    <script src="/tci-flogo/js/perfect-scrollbar.min.js?1623302974"></script>
    <script src="/tci-flogo/js/perfect-scrollbar.jquery.min.js?1623302974"></script>
    <script src="/tci-flogo/js/jquery.sticky-kit.min.js?1623302974"></script>
    <script src="/tci-flogo/js/featherlight.min.js?1623302974"></script>
    <script src="/tci-flogo/js/html5shiv-printshiv.min.js?1623302974"></script>
    <script src="/tci-flogo/js/highlight.pack.js?1623302974"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/tci-flogo/js/modernizr.custom.71422.js?1623302974"></script>
    <script src="/tci-flogo/js/learn.js?1623302974"></script>
    <script src="/tci-flogo/js/hugo-learn.js?1623302974"></script>

    <link href="/tci-flogo/mermaid/mermaid.css?1623302974" type="text/css" rel="stylesheet" />
    <script src="/tci-flogo/mermaid/mermaid.js?1623302974"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

